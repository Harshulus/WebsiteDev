<link rel="stylesheet" href="css/forum.css"> 
<body>
    <div class="main_body">
        <h1 style="color:#3399FF;">Forum</h1>
        <div class="forum_header">
            <h3 style="color:#55D6AA">Make a post</h3>
            <br>

            <form action="/forum" method="post">
                <div class="title_box">
                    Title: <input name="post_title" type="text" id="post_title">
                </div>
                <br>
                <div class="content_box">
                    Content: <input name="post_content" type="text" id="post_content">
                </div>
                <br>
                <div class="post_btn">
                    <input value="Post" type="submit">
                </div>
            </form>
        </div>
        <hr>
        <div class="forum_posts">
            <h3 style="color:#55D6AA">Posts</h3>
            <br>
            <ol>
                
            </ol>
        </div>
        <script>
            function addPost(post) {
                var html = `
                    <li class="forum_row">
                        <a href="/post?${post.id}">
                            <h4 class="post_title">
                                ${post.title}
                            </h4>
                            <div class="forum_bottom">
                                <p class="author">
                                    ${post.author}
                                </p>
                                <p class="time">
                                    ${post.date}
                                </p>
                                <p class="comment_count">
                                    ${post.comments.length} comments
                                </p>
                            </div>
                        </a>
                    </li>
                `
                container.insertAdjacentHTML('beforeend', html);
            }

            var all_posts = ${all_posts}

            var container = document.querySelector('ol');
            for (let post of all_posts) {
                addPost(post)
            }
        </script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script>
            $('form').submit(function () {

                // Get the message content and trim it
                var post_title = $.trim($('#post_title').val());
                var post_content = $.trim($('#post_content').val());

                // Check if empty of not
                if (post_title == '') {
                    alert('Required to have a title for the post.');
                    $('input[name="post_title"]').val("");
                    return false;
                }
                else if (post_content == '') {
                    alert('Required to have some content for the post.');
                    $('input[name="post_content"]').val("");
                    return false;
                }

            });
        </script>
    </div>
</body>